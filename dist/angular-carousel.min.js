/*! angular-carousel.min.js 10-12-2013 */
!function(a,b,c){"use strict";var d=b.module("angular-carousel",["swipe"]);d.directive("carousel",["$timeout","swipe",function(d,e){return{restrict:"E",replace:!0,scope:{content:"=content"},template:'<div class="carousel"><div class="carousel__slider"><div class="carousel__page" ng-repeat="page in carousel.pages() track by $index"><div class="carousel__page__container" ng-include="carousel.content($index)"></div></div></div></div>',link:function(f,g,h){function i(a,c){var d={};return d[a]=c,b.forEach(z.prefixes,function(b){d["-"+b+"-"+a]=c}),d}function j(){return E-z.hint}function k(){E=b.element(g)[0].offsetHeight,z.hint>0&&d(function(){var a=b.element(J).children();b.forEach(a,function(a){b.element(a).css("height",E-z.hint+"px")})},0)}function l(a){var c;return b.forEach(B,function(b,d){b===a&&(c=d)}),c}function m(){return D.direction?A===o()+H:A===I}function n(a){return f.content.length!==c?f.content[a]:f.content.template}function o(){return f.content.length!==c?f.content.length:f.content.count}function p(){A=I,B=[],C=[];for(var a=0;a<z.buffer;a++)B.push(a),C.push({id:a});k(),d(function(){r()},0),v()}function q(){var a,b;if(D.direction){for(a=B[0],b=0;b<z.buffer-1;b++)B[b]=B[b+1];B[z.buffer-1]=a,A++}else{for(a=B[z.buffer-1],b=z.buffer-1;b>0;b--)B[b]=B[b-1];B[0]=a,A--}}function r(){var a,c=b.element(J).children();b.forEach(c,function(c,d){a=l(d)*(E-z.hint),b.element(c).css(i("transform","translate3d(0, "+a+"px, 0 )"))})}function s(a,d){var e=0;a?(e=d!==c?d:z.duration,D.duration=e,b.element(J).addClass("carousel__slider--animated")):b.element(J).removeClass("carousel__slider--animated"),t(e)}function t(a){b.element(J).css(i("transition-duration",a+"ms"))}function u(){s(!1)}function v(){w(E*I)}function w(a){var c=a+2*z.hint;b.element(J).css(i("transform","translate3d(0, "+c+"px, 0 )")),D.slider=a}function x(){G=!0,F=!1;var a=Math.abs(D.start-D.current);0===a&&(a=1);var b,d=(new Date).getTime(),e=d-D.last;b=D.last===c||e>z.duration?Math.round(a/E*z.duration):Math.round(e/z.duration*z.duration),a>10&&e<z.extreme&&!m()?(s(!1),F=!0,y()):(0===b&&(b=1),s(!0,b),D.last=(new Date).getTime(),m()||a<z.treshold*E?D.slider===E*I?y():v():(F=!0,D.slider===E*H+z.hint||D.slider===E*(I+1)-z.hint?y():D.direction?w(E*H+z.hint):w(E*(I+1)-z.hint)))}function y(){s(!1),F&&(f.$apply(function(){q(),r()}),v()),G=!1}var z={prefixes:["webkit","moz","o","ms"],transition:"webkitTransitionEnd transitionend oTransitionEnd",buffer:3,treshold:.25,rubberband:4,duration:300,extreme:600,hint:0};h.options!==c&&"object"==typeof f.$eval(h.options)&&b.extend(z,f.$eval(h.options));var A,B,C,D,E,F,G,H=-(Math.floor(z.buffer/2)+1),I=-Math.floor(z.buffer/2),J=b.element(g).children();b.element(J).bind(z.transition,function(a){a.target.className.indexOf("carousel__slider")>-1&&y()}),D={start:0,current:0,direction:!1,slider:0,last:c,duration:0,started:!1};var K={start:function(a){G||(D.start=a.y,D.current=a.y,u(),D.started=!0)},move:function(a,b){if(!G&&D.started&&b.isVertical){b.stopPropagation(),b.preventDefault();var c=a.y-D.start<=0;if(D.direction=c,Math.abs(D.start-a.y)<=j()){var d=a.y-D.current,e=D.slider+d;D.current=a.y,m()?w(D.slider+d/z.rubberband):w(e)}else m()||(c?w(E*H+z.hint):w(E*(I+1)-z.hint))}},end:function(a,b){!G&&D.started&&b.isVertical&&(b.stopPropagation(),b.preventDefault(),D.started=!1,x())}};e.bind(g,K),f.carousel={content:function(a){var b="";if(f.content!==c){var d=l(a)+A;d<o()&&d>-1&&(b=n(d))}return b},index:function(a){return l(a)+A},pages:function(){return C}},f.$watch("content",function(){p()}),b.element(a).bind("resize",function(){k()})}}}])}(window,window.angular);