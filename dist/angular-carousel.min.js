/*! angular-carousel.min.js 17-11-2013 */
!function(a,b,c){"use strict";var d=b.module("angular-carousel",["swipe"]);d.directive("carousel",["$compile","swipe",function(d,e){return{restrict:"E",replace:!0,scope:{content:"=content"},template:'<div class="carousel"><div class="carousel__slider"></div></div>',link:function(f,g,h){function i(a,c){var d={};return d[a]=c,b.forEach(y.prefixes,function(b){d["-"+b+"-"+a]=c}),d}function j(){C=b.element(g)[0].offsetHeight}function k(a){var c;return b.forEach(A,function(b,d){b===a&&(c=d)}),c}function l(){return B.direction?z===n()+F:z===G}function m(a){return f.content.length!==c?f.content[a]:f.content.template}function n(){return f.content.length!==c?f.content.length:f.content.count}function o(){z=G,A=[];for(var a=0;a<y.buffer;a++)A.push(a);j(),q(),u()}function p(){var a,b;if(B.direction){for(a=A[0],b=0;b<y.buffer-1;b++)A[b]=A[b+1];A[y.buffer-1]=a,z++}else{for(a=A[y.buffer-1],b=y.buffer-1;b>0;b--)A[b]=A[b-1];A[0]=a,z--}}function q(){b.forEach(K,function(a,c){b.element(a).css(i("transform","translate3d(0, "+k(c)*C+"px, 0 )"))})}function r(a,d){var e=0;a?(e=d!==c?d:y.duration,B.duration=e,b.element(H).addClass("carousel__slider--animated")):b.element(H).removeClass("carousel__slider--animated"),s(e)}function s(a){b.element(H).css(i("transition-duration",a+"ms"))}function t(){r(!1)}function u(){v(C*G)}function v(a){var c=a-y.hint;b.element(H).css(i("transform","translate3d(0, "+c+"px, 0 )")),B.slider=a}function w(){E=!0,D=!1;var a=Math.abs(B.start-B.current);0===a&&(a=1);var b,d=(new Date).getTime(),e=d-B.last;b=B.last===c||e>y.duration?Math.round(a/C*y.duration):Math.round(e/y.duration*y.duration),a>2&&e<y.extreme&&!l()?(r(!1),D=!0,x()):(0===b&&(b=1),r(!0,b),B.last=(new Date).getTime(),l()||a<y.treshold*C?B.slider===C*G?x():u():(D=!0,B.slider===C*F||B.slider===C*(G+1)?x():B.direction?v(C*F):v(C*(G+1))))}function x(){f.$apply(function(){r(!1),D&&(p(),q(),u()),E=!1})}var y={index:"cindex",prefixes:["webkit","moz","o","ms"],transition:"webkitTransitionEnd transitionend oTransitionEnd",buffer:3,treshold:.25,rubberband:4,duration:300,extreme:200,hint:0};h.options!==c&&"object"==typeof f.$eval(h.options)&&b.extend(y,f.$eval(h.options));for(var z,A,B,C,D,E,F=-(Math.floor(y.buffer/2)+1),G=-Math.floor(y.buffer/2),H=b.element(g).children(),I=0;I<y.buffer;I++){var J=b.element('<div class="carousel__page"><div class="carousel__page__container" ng-include="carousel.content('+I+')" ng-init="'+y.index+"="+I+'"></div></div>');b.element(H).append(J)}d(H)(f);var K=b.element(H).children();b.element(H).bind(y.transition,function(a){a.target.className.indexOf("carousel__slider")>-1&&x()}),B={start:0,current:0,direction:!1,slider:0,last:c,duration:0,started:!1};var L={start:function(a){E||(B.start=a.y,B.current=a.y,t(),B.started=!0)},move:function(a){if(!E&&B.started){var b=a.y-B.start<=0;if(B.direction=b,Math.abs(B.start-a.y)<=C){var c=a.y-B.current,d=B.slider+c;B.current=a.y,l()?v(B.slider+c/y.rubberband):v(d)}else l()||(b?v(C*F):v(C*(G+1)))}},end:function(){!E&&B.started&&(B.started=!1,w())}};e.bind(g,L),f.carousel={content:function(a){var b="";if(f.content!==c){var d=k(a)+z;d<n()&&d>-1&&(b=m(d))}return b},index:function(a){return k(a)+z}},f.$watch("content",function(){o()}),b.element(a).bind("resize",function(){j()})}}}])}(window,window.angular);