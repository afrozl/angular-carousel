/*! angular-carousel.min.js 18-11-2013 */
!function(a,b,c){"use strict";var d=b.module("angular-carousel",["swipe"]);d.directive("carousel",["$timeout","swipe",function(d,e){return{restrict:"E",replace:!0,scope:{content:"=content"},template:'<div class="carousel"><div class="carousel__slider"><div class="carousel__page" ng-repeat="page in carousel.pages() track by $index"><div class="carousel__page__container" ng-include="carousel.content($index)"></div></div></div></div>',link:function(f,g,h){function i(a,c){var d={};return d[a]=c,b.forEach(y.prefixes,function(b){d["-"+b+"-"+a]=c}),d}function j(){D=b.element(g)[0].offsetHeight}function k(a){var c;return b.forEach(A,function(b,d){b===a&&(c=d)}),c}function l(){return C.direction?z===n()+G:z===H}function m(a){return f.content.length!==c?f.content[a]:f.content.template}function n(){return f.content.length!==c?f.content.length:f.content.count}function o(){z=H,A=[],B=[];for(var a=0;a<y.buffer;a++)A.push(a),B.push({id:a});j(),d(function(){q()},0),u()}function p(){var a,b;if(C.direction){for(a=A[0],b=0;b<y.buffer-1;b++)A[b]=A[b+1];A[y.buffer-1]=a,z++}else{for(a=A[y.buffer-1],b=y.buffer-1;b>0;b--)A[b]=A[b-1];A[0]=a,z--}}function q(){var a=b.element(I).children();b.forEach(a,function(a,c){b.element(a).css(i("transform","translate3d(0, "+k(c)*D+"px, 0 )"))})}function r(a,d){var e=0;a?(e=d!==c?d:y.duration,C.duration=e,b.element(I).addClass("carousel__slider--animated")):b.element(I).removeClass("carousel__slider--animated"),s(e)}function s(a){b.element(I).css(i("transition-duration",a+"ms"))}function t(){r(!1)}function u(){v(D*H)}function v(a){var c=a-y.hint;b.element(I).css(i("transform","translate3d(0, "+c+"px, 0 )")),C.slider=a}function w(){F=!0,E=!1;var a=Math.abs(C.start-C.current);0===a&&(a=1);var b,d=(new Date).getTime(),e=d-C.last;b=C.last===c||e>y.duration?Math.round(a/D*y.duration):Math.round(e/y.duration*y.duration),a>2&&e<y.extreme&&!l()?(r(!1),E=!0,x()):(0===b&&(b=1),r(!0,b),C.last=(new Date).getTime(),l()||a<y.treshold*D?C.slider===D*H?x():u():(E=!0,C.slider===D*G||C.slider===D*(H+1)?x():C.direction?v(D*G):v(D*(H+1))))}function x(){r(!1),E&&(f.$apply(function(){p(),q()}),u()),F=!1}var y={prefixes:["webkit","moz","o","ms"],transition:"webkitTransitionEnd transitionend oTransitionEnd",buffer:3,treshold:.25,rubberband:4,duration:300,extreme:200,hint:0};h.options!==c&&"object"==typeof f.$eval(h.options)&&b.extend(y,f.$eval(h.options));var z,A,B,C,D,E,F,G=-(Math.floor(y.buffer/2)+1),H=-Math.floor(y.buffer/2),I=b.element(g).children();b.element(I).bind(y.transition,function(a){a.target.className.indexOf("carousel__slider")>-1&&x()}),C={start:0,current:0,direction:!1,slider:0,last:c,duration:0,started:!1};var J={start:function(a){F||(C.start=a.y,C.current=a.y,t(),C.started=!0)},move:function(a){if(!F&&C.started){var b=a.y-C.start<=0;if(C.direction=b,Math.abs(C.start-a.y)<=D){var c=a.y-C.current,d=C.slider+c;C.current=a.y,l()?v(C.slider+c/y.rubberband):v(d)}else l()||(b?v(D*G):v(D*(H+1)))}},end:function(){!F&&C.started&&(C.started=!1,w())}};e.bind(g,J),f.carousel={content:function(a){var b="";if(f.content!==c){var d=k(a)+z;d<n()&&d>-1&&(b=m(d))}return b},index:function(a){return k(a)+z},pages:function(){return B}},f.$watch("content",function(){o()}),b.element(a).bind("resize",function(){j()})}}}])}(window,window.angular);